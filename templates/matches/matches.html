{% extends "base.html" %}
{% load static %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matches</title>
</head>
<body>

    <!-- Matches in Progress -->
    <h2>Matches in Progress</h2>
    <div class="matches-container">
        {% for match in current_matches %}
        <div class="match-card">
            <div class="match-header">
                {{ match.time|date:"g:i A" }} - {{ match.date }}
            </div>
            <div class="match-content">
                {% with match.get_teams as teams %}
                <div class="team">
                    <img src="{% static 'images/team_logos/'|add:teams.0|add:'.png' %}" alt="{{ teams.0 }}">
                    <span class="team-name">{{ teams.0 }}</span>
                    <a href="{% url 'create_bet' %}?bet_match={{ match.id }}&bet_choice={{ teams.0 }}&selected_odd={{ match.get_odds.0 }}" class="odds">
                        {{ match.get_odds.0 }}
                    </a>
                </div>
                <div class="match-vs">VS</div>
                <div class="team">
                    <img src="{% static 'images/team_logos/'|add:teams.1|add:'.png' %}" alt="{{ teams.1 }}">
                    <span class="team-name">{{ teams.1 }}</span>
                    <a href="{% url 'create_bet' %}?bet_match={{ match.id }}&bet_choice={{ teams.1 }}&selected_odd={{ match.get_odds.1 }}" class="odds">
                        {{ match.get_odds.1 }}
                    </a>
                </div>
                {% endwith %}
            </div>
        </div>
        {% empty %}
        <p>No matches in progress.</p>
        {% endfor %}
    </div>

    <!-- Upcoming Matches -->
    <h2>Upcoming Matches</h2>
    <div class="matches-container">
        {% for match in upcoming_matches %}
        <div class="match-card">
            <div class="match-header">
                {{ match.time|date:"g:i A" }} - {{ match.date }}
            </div>
            <div class="match-content">
                {% with match.get_teams as teams %}
                <div class="team">
                    <img src="{% static 'images/team_logos/'|add:teams.0|add:'.png' %}" alt="{{ teams.0 }}">
                    <span class="team-name">{{ teams.0 }}</span>
                    <a href="{% url 'create_bet' %}?bet_match={{ match.id }}&bet_choice={{ teams.0 }}&selected_odd={{ match.get_odds.0 }}" class="odds">
                        {{ match.get_odds.0 }}
                    </a>
                </div>
                <div class="match-vs">VS</div>
                <div class="team">
                    <img src="{% static 'images/team_logos/'|add:teams.1|add:'.png' %}" alt="{{ teams.1 }}">
                    <span class="team-name">{{ teams.1 }}</span>
                    <a href="{% url 'create_bet' %}?bet_match={{ match.id }}&bet_choice={{ teams.1 }}&selected_odd={{ match.get_odds.1 }}" class="odds">
                        {{ match.get_odds.1 }}
                    </a>
                </div>
                {% endwith %}
            </div>
        </div>
        {% empty %}
        <p>No upcoming matches.</p>
        {% endfor %}
    </div>

    <!-- Recently Completed Matches -->
    <h2>Recently Completed Matches</h2>
    <div class="matches-container">
        {% for match in recent_matches %}
        <div class="match-card">
            <div class="match-header">
                {{ match.time|date:"g:i A" }} - {{ match.date }}
            </div>
            <div class="match-content">
                {% with match.get_teams as teams %}
                <div class="team">
                    <img src="{% static 'images/team_logos/'|add:teams.0|add:'.png' %}" alt="{{ teams.0 }}">
                    <span class="team-name">{{ teams.0 }}</span>
                    <a href="{% url 'create_bet' %}?bet_match={{ match.id }}&bet_choice={{ teams.0 }}&selected_odd={{ match.get_odds.0 }}" class="odds">
                        {{ match.get_odds.0 }}
                    </a>
                </div>
                <div class="match-vs">VS</div>
                <div class="team">
                    <img src="{% static 'images/team_logos/'|add:teams.1|add:'.png' %}" alt="{{ teams.1 }}">
                    <span class="team-name">{{ teams.1 }}</span>
                    <a href="{% url 'create_bet' %}?bet_match={{ match.id }}&bet_choice={{ teams.1 }}&selected_odd={{ match.get_odds.1 }}" class="odds">
                        {{ match.get_odds.1 }}
                    </a>
                </div>
                {% endwith %}
            </div>
        </div>
        {% empty %}
        <p>No recently completed matches.</p>
        {% endfor %}
    </div>

</body>
</html>
{% endblock %}
